{% sw_extends '@Storefront/storefront/component/address/address-form.html.twig' %}

{% block component_address_form_address_fields %}
    <div class="form-row contact-address">
        {% block component_address_form_street %}
            <div class="form-group col-12">
                {% if formViolations.getViolations("/street") is not empty %}
                    {% set violationPath = "/street" %}
                {% elseif formViolations.getViolations("/#{prefix}/street") is not empty %}
                    {% set violationPath = "/#{prefix}/street" %}
                {% endif %}

                {{ block('component_address_form_street_label') }}

                {{ block('component_address_form_street_input') }}

                {{ block('component_address_form_street_input_error') }}
            </div>
        {% endblock %}

        {% block component_address_form_zipcode_city %}
            {% set zipcodeField %}
                {% if formViolations.getViolations("/zipcode") is not empty %}
                    {% set violationPath = "/zipcode" %}
                {% elseif formViolations.getViolations("/#{prefix}/zipcode") is not empty %}
                    {% set violationPath = "/#{prefix}/zipcode" %}
                {% endif %}

                {{ block('component_address_form_zipcode_label') }}

                {{ block('component_address_form_zipcode_input') }}

                {{ block('component_address_form_zipcode_error') }}
            {% endset %}

            {% set cityField %}
                {% if formViolations.getViolations("/city") is not empty %}
                    {% set violationPath = "/city" %}
                {% elseif formViolations.getViolations("/#{prefix}/city") is not empty %}
                    {% set violationPath = "/#{prefix}/city" %}
                {% else %}
                    {% set violationPath = null %}
                {% endif %}

                {{ block('component_address_form_city_label') }}

                {{ block('component_address_form_city_input') }}

                {{ block('component_address_form_city_error') }}
            {% endset %}

            {% if config('core.address.showZipcodeInFrontOfCity') %}
                <div class="form-group col-6">
                    {{ zipcodeField }}
                </div>

                <div class="form-group col-6">
                    {{ cityField }}
                </div>
            {% else %}
                <div class="form-group col-6">
                    {{ cityField }}
                </div>

                <div class="form-group col-6">
                    {{ zipcodeField }}
                </div>
            {% endif %}
        {% endblock %}

        {% block component_address_form_additional_field1 %}
            {{ parent() }}
        {% endblock %}

        {% block component_address_form_additional_field2 %}
            {{ parent() }}
        {% endblock %}
    </div>

    <div class="form-row country-and-state-form-elements" data-country-state-select="true">
        {% block component_address_form_country %}
            {{ parent() }}
        {% endblock %}
    </div>

    <div class="form-row contact-form">
        {% block component_address_form_phone_number %}
            {{ parent() }}
        {% endblock %}
    </div>
{% endblock %}
